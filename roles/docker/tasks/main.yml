---
# tasks file for roles/docker
- name: Install base
  apk:
    name:
        - python3
        - pip
        - docker
    state: present

- name: Remove old versions
  pip:
    name:
       - docker-py
       - docker
    state: absent

- name: Install Docker SDK for Python
  pip: 
    name: docker==4.4.4
    state: present
  
- name: Start and enable docker
  service:
    name: docker
    enabled: yes
    state: started

- name: Create docker network
  docker_network:
    name: "{{ network }}"
    ipam_config:
      - subnet: 172.17.0.0/16
    state: present
    force: yes